version: "1.0"

backend:
  type: claude
  
loop:
  max_iterations: 100
  completion_promise: "LOOP_COMPLETE"
  idle_timeout_secs: 1800

hats:
  planner:
    triggers: ["task.start"]
    publishes: ["plan.ready"]
    
  builder:
    triggers: ["plan.ready", "tests.failing"]
    publishes: ["code.written"]
    
  tester:
    triggers: ["code.written"]
    publishes: ["tests.passing", "tests.failing"]
    
  reviewer:
    triggers: ["tests.passing"]
    publishes: ["review.approved", "review.rejected"]

gates:
  after_plan: true
  after_implementation: false
  before_pr: true

quality:
  min_score: 8
  auto_approve_above: 9

state:
  use_github_labels: true
  use_scratchpad: true
  scratchpad_path: ".agent/scratchpad.md"
